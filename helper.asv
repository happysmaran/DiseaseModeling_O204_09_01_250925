function [s_n, q_n, i_n, r_n] = helper(s, q, i, r, m, o, beta, gamma)

% compute new infections and recoveries
sq_p1 = (1 - o) * i * s;
sq_p2 = s * o * m * i * beta;
sq = sq_p1 - sq_p2;
sq = min(sq, floor(s));

qq_p1 = s * o * m * beta * i;
qq_p2 = q * gamma;
qq = qq

s_n = s - infected;
i_n = i + infected - recovered;
r_n = r + recovered;

% Enforce invariants
s_n = max(s_n, 0);
i_n = max(i_n, 0);
r_n = max(r_n, 0);

end